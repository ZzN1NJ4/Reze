# Independent Malware

The general process injection malware that we had written earlier won’t even actually work on other machines, and that is because it requires some DLLs provided by Visual Studio in order to run the program. There’s no use of developing something you can’t run on another machine. A DLL stands for Dynamic Link Library and it generally contains some code which can be utilized by other programs. There are a lot of advantages of doing so which can be read on the [Microsoft’s official documentation](https://learn.microsoft.com/en-us/troubleshoot/windows-client/setup-upgrade-and-drivers/dynamic-link-library).

[Capt. Meelo](https://twitter.com/CaptMeelo) has done a great job of explaining how we can achieve that on his [blog post](https://captmeelo.com/redteam/maldev/2022/10/17/independent-malware.html), so I will just highlight the things he mentioned + a few things that seemed interesting to me.

1. **Getting Rid of CRT (C Runtime Library)** - Project → Properties → C/C++ → Code Generation → Runtime Library → Multi threaded

<figure><img src="../.gitbook/assets/image (8) (1).png" alt=""><figcaption></figcaption></figure>

2. **Ignore Default Libraries** - Project → Properties → Linker → Input → Ignore all default libraries → Yes

<figure><img src="../.gitbook/assets/image (9).png" alt=""><figcaption></figcaption></figure>

3. Set Entry Point to main

<figure><img src="../.gitbook/assets/image (10).png" alt=""><figcaption></figcaption></figure>

note that this can also be any other function as well

4. **Disabling Security Check**

<figure><img src="../.gitbook/assets/image (11).png" alt=""><figcaption></figcaption></figure>

These are the ones mentioned on the blog post, apart from these, I also faced a different error about `_RTC_InitBase` and 2 others like that, after poking around, I fixed it by changing the value of `Basic Runtime Checks` to Default

<figure><img src="../.gitbook/assets/image (12).png" alt=""><figcaption></figcaption></figure>

Now after checking the other settings as well, here are a few things that I found would be better to change.&#x20;

Switch to “Release” mode, this is always  preferable when malware has been developed or in its final stage.

<figure><img src="../.gitbook/assets/image (14).png" alt=""><figcaption></figcaption></figure>

No need to use Debug libraries

<figure><img src="../.gitbook/assets/image (13).png" alt=""><figcaption></figcaption></figure>

No need to generate debug info

<figure><img src="../.gitbook/assets/image (15).png" alt="Project Properties -> linker -> generate debug info -> switch to No"><figcaption></figcaption></figure>

This should be it, if you have followed till here, thanks :). If you feel like I have missed something or made a mistake, feel free to reach me out on [twitter](https://twitter.com/ZzN1NJ4).
